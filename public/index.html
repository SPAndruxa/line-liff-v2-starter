<!DOCTYPE html>

<html lang="en">

    <head>

        <meta charset="utf-8"/>

        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>

        <meta name="viewport" content="width=device-width,initial-scale=1"/>

        <title>Gigya login test</title>

        <!--link rel="stylesheet" href="./css/centralpage.css"/-->

        <script type="text/javascript" src="https://cdns.gigya.com/js/gigya.js?apiKey=3_ejiBpUKe3wdl5VAb7q-J1HSux9e5sgVsENViW6YLlBiJxs-XNuJt6YwpQAkvQTYt"></script>
        <script src="liff-starter.js"></script>
        <style>  
            a.button22 {
              position: relative;
              display: inline-block;
              width: 6em;
              height: 2.5em;
              line-height: 2.4em;
              vertical-align: middle;
              text-align: center;
              text-decoration: none;
              user-select: none;
              color: #000;
              outline: none;
              border: 1px solid rgba(110,121,128,.8);
              border-top-color: rgba(0,0,0,.3);
              border-radius: 5px;
              background: rgb(206, 220, 231) linear-gradient(rgb(206,220,231), rgb(89,106,114));
              box-shadow:
               0 -1px rgba(10,21,28,.9) inset,
               0 1px rgba(255,255,255,.5) inset;
            }
            a.button22:hover {
              background: linear-gradient(#d2dfea, #71828c);
            }
            a.button22:active {
              line-height: 2.6em;
              background: linear-gradient(#bac6cf, #c5d3de 20%, #71828c);
              box-shadow: 0 -1px rgba(255,255,255,.4) inset;
            }
            a.button22:before {
              content: "";
              position: absolute;
              top: -10px; right: -10px; bottom: -10px; left: -10px;
              z-index: -1;
              border-radius: 8px;
              background: linear-gradient(rgba(200,200,200,.5), rgba(240,240,240,.5));
            }
           </style>
    </head>

    <body>

    <a href="#" class="button22" onclick="showScreen('Registration_Web_LINE');">Registration / Login</a>
        <a href="#" class="button22" onclick="showScreen('Login_Web');">Login</a>
        <a href="#" class="button22" onclick="showScreen('Pwd_Reset_step1');">Reset Password</a>
        <input type='text' id='test' value='Привет'>
    </body>

<script>

  function showScreen(startScreen){

  gigya.accounts.showScreenSet({
    screenSet:'DCE 2.0 - RegistrationLogin_V2',
    lang:'es',
    startScreen:startScreen,
    onAfterSubmit:function(e){
        delete e.response.requestParams.customLang;
        console.log(e)
        var params = window
            .location
            .search
            .replace('?','')
            .split('&')
            .reduce(
                function(p,e){
                    var a = e.split('=');
                    p[ decodeURIComponent(a[0])] = decodeURIComponent(a[1]);
                    return p;
                },
                {}
            );
        e.chat_id_hax = params["liff.state"].slice(2);
        document.getElementById('test').value = JSON.stringify(JSON.stringify(params));
        var url = 'https://www.corezoid.com/api/1/json/public/878848/a467f4719275b09770a1db3469a4a1d77e5e1c89';
        fetch(url, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          mode: 'no-cors',
          body: JSON.stringify(e)
        });
    }
  });

}

</script>

</html>
